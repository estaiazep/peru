<!DOCTYPE html>
<html lang="vi-VN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <title>MINES</title>
  <style type="text/css" id="operaUserStyle"></style>
</head>

<body>

 Welcome Screen 
<div id="welcome-screen" class="welcome-container">
  <div class="welcome-background">
    <div class="floating-particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
    
    <div class="welcome-content">
      <div class="welcome-logo">
        <div class="logo-icon">üéØ</div>
        <h1 class="welcome-title">JUAN SIGNAL</h1>
        <div class="welcome-subtitle">Bot Khai Th√°c Cao C·∫•p</div>
      </div>
      
      <div class="welcome-features">
        <div class="feature-item">
          <div class="feature-icon">üáªüá≥</div>
          <span>ƒê∆∞·ª£c t·∫°o ƒë·ªôc quy·ªÅn cho Vi·ªát Nam</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">‚ö°</div>
          <span>T·∫°o t√≠n hi·ªáu th·ªùi gian th·ª±c</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üíé</div>
          <span>ƒê·ªô ch√≠nh x√°c 95%+</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üöÄ</div>
          <span>C·∫£nh b√°o l·ª£i nhu·∫≠n t·ª©c th√¨</span>
        </div>
      </div>
      
      <div class="welcome-stats">
        <div class="stat-item">
          <div class="stat-number">15,847</div>
          <div class="stat-label">Ng∆∞·ªùi D√πng Ho·∫°t ƒê·ªông</div>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <div class="stat-number">‚Ç´58M</div>
          <div class="stat-label">T·ªïng L·ª£i Nhu·∫≠n</div>
        </div>
      </div>
      
      <button id="start-bot-button" class="start-bot-btn">
        <span class="btn-text">B·∫Øt ƒê·∫ßu S·ª≠ D·ª•ng Bot</span>
        <div class="btn-glow"></div>
      </button>
      
      <div class="welcome-footer">
        <p>üîí An To√†n ‚Ä¢ üéØ Ch√≠nh X√°c ‚Ä¢ üí∞ Sinh L·ªùi</p>
      </div>
    </div>
  </div>
</div>

 Main Game Screen 
<div id="main-game" style="display: none;">
  <a href="javascript:void(0)" class="BackArrow">
    <svg id="backArrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="60" height="60">
      <defs>
        <linearGradient id="arrow-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#00ffe1">
            <animate attributeName="offset" values="0;1;0" dur="2s" repeatCount="indefinite" />
          </stop>
          <stop offset="100%" stop-color="#ffffff">
            <animate attributeName="offset" values="1;0;1" dur="2s" repeatCount="indefinite" />
          </stop>
        </linearGradient>
      </defs>
      <path d="M 30 10 L 15 25 L 30 40" fill="none" stroke="url(#arrow-gradient)" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </a>

  <div class="item-traps select-index-box">
    <img src="bomb.png" alt="">
    <a id="select-index">3</a>
  </div>

  <div class="header">
    <img class="img-footer" src="footer.webp" alt="footer">
  </div>

  <div class="game-container">
    <div class="crack crack1" style="left: 42vw; top: 2vh; rotate: 95deg; scale: 1.5;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack crack2" style="left: 0vw; top: 34vh; rotate: 360deg;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack crack3" style="left: 81vw; rotate: 227deg;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack particles1" style="top: 21vh; left: 2vw; scale: 1.5;">
      <img src="particles.svg" alt="crack">
    </div>
    <div class="crack particles2" style="top: 39vh; left: 82vw; rotate: 288deg;">
      <img src="particles.svg" alt="crack">
    </div>

    <div class="text-top">
      <h1 class="text-title">MINES</h1>
      <p class="name-bot">BOT CH·ªà D√ÄNH CHO 1XBET</p>
    </div>

    <div style="justify-content: center; display: flex; vertical-align: middle;">
      <div class="game-screen">
        <div class="screen-active" id="main-screen">
          <img draggable="false" id="screenStart" class="screenStart" src="Mines.png" alt="start">
          <img draggable="false" src="loading.gif" alt="loading" id="loading" class="loading deactive">
          <canvas class="img-signal deactive" id="canvas"></canvas>
        </div>

        <div class="screen-active" id="traps-screen" style="display: none">
          <div class="traps-screen">
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>1</a>
            </div>
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>3</a>
            </div>
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>5</a>
            </div>
            <div class="item-traps" onclick="handleClick(this)">
              <img src="bomb.png">
              <a>7</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="crack crack4" style="rotate: 40deg;">
      <img src="crack1.svg" alt="crack">
    </div>
    <div class="crack" style="left: 76vw; bottom: 30vh; rotate: 327deg; scale: 1.5;">
      <img src="particles.svg" alt="crack">
    </div>

    <div class="game-button">
      <a id="percent-chance" style="font-size: 3vh; display: none">X√ÅC SU·∫§T: 90.12%</a>
      <button id="get-signal" class="get-signal">Nh·∫≠n T√≠n Hi·ªáu</button>
      <div id="signal-error" class="signal-error" style="display:none;"></div>
      <div style="display: flex; gap: 2vw;">
        <a href="https://1xlite-93399.world/es/casino-search?game=112412" class="game-here" target="_blank" rel="noopener noreferrer">Ch∆°i T·∫°i ƒê√¢y</a>
        <a onclick="activeTrapsScreen()" id="chose-traps" class="chose-traps">Ch·ªçn B·∫´y</a>
      </div>
    </div>
  </div>

  <div class="footer">
    <img class="img-footer" src="footer.webp" alt="footer">
  </div>
</div>

 Verification Modal 
<div id="verification-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content verification-modal">
    <div class="verification-header">
      <div class="verification-icon">üîê</div>
      <h2 class="verification-title-modal">X√ÅC MINH T√ÄI KHO·∫¢N</h2>
      <p class="verification-subtitle-modal">Nh·∫≠p ID t√†i kho·∫£n 1xBet c·ªßa b·∫°n</p>
    </div>
    
    <div class="verification-body">
      <div class="input-container">
        <input type="text" id="modal-account-id" class="modal-account-input" placeholder="Nh·∫≠p ID t√†i kho·∫£n" maxlength="10">
      </div>
      <div id="modal-error-message" class="modal-error-message" style="display: none;">ƒê·ªãnh d·∫°ng ID t√†i kho·∫£n kh√¥ng h·ª£p l·ªá</div>
      
       Success Message 
      <div id="success-message" class="success-message" style="display: none;">
        <div class="success-icon">‚úÖ</div>
        <div class="success-text">T√†i kho·∫£n ƒë√£ k·∫øt n·ªëi v·ªõi bot!</div>
      </div>
    </div>
    
    <div class="verification-footer">
      <button id="modal-verify-button" class="modal-verify-btn">
        <span>X√°c Minh</span>
      </button>
      
      <div class="get-id-section-modal">
        <p class="get-id-instruction-modal">C·∫ßn ID? L·∫•y t·∫°i ƒë√¢y</p>
        <button id="modal-get-id-button" class="modal-get-id-btn">L·∫•y ID</button>
      </div>
    </div>
  </div>
</div>

 Deposit Modal 
<div id="deposit-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content deposit-modal">
    <div class="deposit-header">
      <div class="deposit-icon">üí∞</div>
      <h2 class="deposit-title">K√çCH HO·∫†T T√çN HI·ªÜU</h2>
    </div>
    
    <div class="deposit-body">
      <div class="deposit-message">
        <p class="deposit-text">‚úÖ ID ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n.</p>
        <p class="deposit-text">ƒê·ªÉ k√≠ch ho·∫°t t√≠n hi·ªáu, h√£y n·∫°p <span class="highlight">‚Ç´450.000</span>.</p>
        <p class="deposit-text">Bot ch·ªâ k·∫øt n·ªëi v·ªõi t√†i kho·∫£n ƒëang ho·∫°t ƒë·ªông.</p>
      </div>
      
      <div class="unlock-section">
        <p class="unlock-label">Nh·∫≠p m√£ m·ªü kh√≥a ƒë·ªÉ k√≠ch ho·∫°t:</p>
        <div class="unlock-input-container">
          <input type="text" id="unlock-code-input" class="unlock-code-input" placeholder="Nh·∫≠p m√£" maxlength="4">
        </div>
        <div id="unlock-error" class="unlock-error" style="display: none;">M√£ m·ªü kh√≥a kh√¥ng ch√≠nh x√°c</div>
        <div id="unlock-success" class="unlock-success" style="display: none;">‚úÖ M·ªü kh√≥a bot th√†nh c√¥ng!</div>
      </div>
      
      <div class="deposit-info">
        <p class="deposit-instruction">üí¨ Nh·∫Øn tin cho t√¥i ƒë·ªÉ nh·∫≠n m√£ khuy·∫øn m√£i v√† h∆∞·ªõng d·∫´n n·∫°p ti·ªÅn:</p>
      </div>
    </div>
    
    <div class="deposit-footer">
      <button id="unlock-bot-button" class="unlock-bot-btn">
        üîì M·ªü Kh√≥a Bot
      </button>
      <button id="activate-now-button" class="activate-now-btn">
        üí¨ K√≠ch Ho·∫°t Ngay
      </button>
    </div>
  </div>
</div>

 Suspicious Account Modal 
<div id="suspicious-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content deposit-modal">
    <div class="deposit-header">
      <div class="deposit-icon">üé∞</div>
      <h2 class="deposit-title">ƒê√É ƒê·∫†T GI·ªöI H·∫†N</h2>
    </div>
    
    <div class="deposit-body">
      <div class="deposit-message">
        <p class="deposit-text">üö® <span class="highlight">B·∫°n ƒë√£ ƒë·∫°t gi·ªõi h·∫°n!</span></p>
        <p class="deposit-text">üí° <span class="highlight">T√¥i c√≥ gi·∫£i ph√°p!</span></p>
      </div>
      
      <div class="welcome-features" style="margin: 15px 0; gap: 10px;">
        <div class="feature-item">
          <div class="feature-icon">üé∞</div>
          <span>Bot SLOTS mi·ªÖn ph√≠</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">üí∞</div>
          <span>L·ª£i nhu·∫≠n ƒë∆∞·ª£c ƒë·∫£m b·∫£o</span>
        </div>
      </div>
      
      <div class="deposit-message">
        <p class="deposit-text">üéØ <span class="highlight">Nh·∫Øn tin cho t√¥i ngay!</span></p>
      </div>
    </div>
    
    <div class="deposit-footer">
      <button id="get-slots-bot-button" class="activate-now-btn">
        üé∞ Nh·∫≠n Bot Slots
      </button>
    </div>
  </div>
</div>

<script src="script.js"></script>
<script src="CanvasMines.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<script>
  Telegram.WebApp.expand();
  window.Telegram.WebApp.allow_vertical_swipe = false;
  window.Telegram.WebApp.disableVerticalSwipes();

  // Signal counter logic
  let signalCount = parseInt(localStorage.getItem("signal_count") || "0");
  const MAX_FREE_SIGNALS = 16;

  // Welcome Screen Logic
  function startBot() {
    document.getElementById("welcome-screen").style.display = "none";
    document.getElementById("main-game").style.display = "block";
    
    setTimeout(() => {
      const accountVerified = localStorage.getItem('account_verified');
      const botUnlocked = localStorage.getItem('bot_unlocked');
      
      if (accountVerified !== 'true' || botUnlocked !== 'true') {
        document.getElementById("verification-modal").style.display = "flex";
      }
    }, 1000);
  }

  // ID Verification Logic (simplified)
  function validateAccountId(id) {
    return /^13\d{8}$/.test(id);
  }

  function showModalError(message) {
    const errorElement = document.getElementById("modal-error-message");
    errorElement.textContent = message;
    errorElement.style.display = "block";
  }

  function hideModalError() {
    document.getElementById("modal-error-message").style.display = "none";
  }

  function verifyModalAccount() {
    const accountId = document.getElementById("modal-account-id").value;

    hideModalError();

    if (!validateAccountId(accountId)) {
      showModalError("ƒê·ªãnh d·∫°ng ID t√†i kho·∫£n kh√¥ng h·ª£p l·ªá");
      return;
    }

    // Show success immediately
    document.getElementById("success-message").style.display = "block";
    document.getElementById("modal-verify-button").style.display = "none";
    
    // Show deposit modal after 1.5 seconds
    setTimeout(() => {
      document.getElementById("verification-modal").style.display = "none";
      document.getElementById("deposit-modal").style.display = "flex";
    }, 1500);
    
    localStorage.setItem('account_verified', 'true');
    localStorage.setItem('account_id', accountId);
  }

  // Unlock Bot Logic
  function unlockBot() {
    const unlockCode = document.getElementById("unlock-code-input").value;
    const errorElement = document.getElementById("unlock-error");
    const successElement = document.getElementById("unlock-success");
    
    errorElement.style.display = "none";
    successElement.style.display = "none";
    
    if (unlockCode === "6923") {
      successElement.style.display = "block";
      localStorage.setItem('bot_unlocked', 'true');
      
      setTimeout(() => {
        document.getElementById("deposit-modal").style.display = "none";
      }, 2000);
    } else {
      errorElement.style.display = "block";
    }
  }

  // Developer chat functions
  function openDeveloperChatForActivation() {
    const developerUsername = "RamirezSignal_bot";
    const prefillMessage = "Xin ch√†o! T√¥i mu·ªën k√≠ch ho·∫°t t√†i kho·∫£n c·ªßa m√¨nh ƒë·ªÉ nh·∫≠n t√≠n hi·ªáu üí∞";
    const telegramUrl = `https://t.me/${developerUsername}?text=${encodeURIComponent(prefillMessage)}`;
    
    if (window.Telegram && window.Telegram.WebApp) {
      window.Telegram.WebApp.openTelegramLink(telegramUrl);
    } else {
      window.open(telegramUrl, '_blank');
    }
  }

  function openDeveloperChatForId() {
    const developerUsername = "RamirezSignal_bot";
    const prefillMessage = "Xin ch√†o! T√¥i mu·ªën l·∫•y ID 1xBet c·ªßa m√¨nh ‚úÖ";
    const telegramUrl = `https://t.me/${developerUsername}?text=${encodeURIComponent(prefillMessage)}`;
    
    if (window.Telegram && window.Telegram.WebApp) {
      window.Telegram.WebApp.openTelegramLink(telegramUrl);
    } else {
      window.open(telegramUrl, '_blank');
    }
  }

  function openDeveloperChatForSlots() {
    const developerUsername = "RamirezSignal_bot";
    const prefillMessage = "Xin ch√†o! T√¥i ƒë√£ ƒë·∫°t gi·ªõi h·∫°n t√≠n hi·ªáu. T√¥i mu·ªën bot SLOTS üé∞";
    const telegramUrl = `https://t.me/${developerUsername}?text=${encodeURIComponent(prefillMessage)}`;
    
    if (window.Telegram && window.Telegram.WebApp) {
      window.Telegram.WebApp.openTelegramLink(telegramUrl);
    } else {
      window.open(telegramUrl, '_blank');
    }
  }

  // MAIN SIGNAL FUNCTION - Override the original getSignal
  function getSignal() {
    console.log('getSignal called, current count:', signalCount);
    
    // Check if reached limit FIRST
    if (signalCount >= MAX_FREE_SIGNALS) {
      console.log('Limit reached, showing modal');
      document.getElementById("suspicious-modal").style.display = "flex";
      return;
    }

    const signal = document.getElementById("canvas");
    const screenStart = document.getElementById("screenStart");
    const loadingSignal = document.getElementById("loading");
    const buttonGetSignal = document.getElementById("get-signal");
    const percentChance = document.getElementById("percent-chance");
    const selectIndex = document.getElementById("select-index");
    const mainScreen = document.getElementById("main-screen");
    const trapsScreen = document.getElementById("traps-screen");

    if (!signal || !screenStart || !loadingSignal || !buttonGetSignal || !percentChance || !selectIndex || !mainScreen || !trapsScreen) {
      console.log('Some elements not found');
      return;
    }

    // Increment counter IMMEDIATELY when signal starts
    signalCount++;
    localStorage.setItem("signal_count", signalCount.toString());
    console.log('Signal count incremented to:', signalCount);
    
    // Update button text
    const remaining = MAX_FREE_SIGNALS - signalCount;
    if (remaining > 0) {
      buttonGetSignal.textContent = `Nh·∫≠n T√≠n Hi·ªáu (c√≤n ${remaining})`;
    } else {
      buttonGetSignal.textContent = "ƒê√£ ƒë·∫°t gi·ªõi h·∫°n";
    }

    signal.classList.add("deactive");
    screenStart.classList.add("deactive");
    loadingSignal.classList.remove("deactive");
    buttonGetSignal.disabled = true;

    mainScreen.style.display = "";
    trapsScreen.style.display = "none";

    percentChance.textContent = "X√ÅC SU·∫§T: " + (Math.random() * (95 - 80) + 80).toFixed(2) + "%";
    percentChance.style.display = "";

    setTimeout(() => {
      if (!loadingSignal || !signal || !buttonGetSignal || !selectIndex) return;
      loadingSignal.classList.add("deactive");
      signal.classList.remove("deactive");
      buttonGetSignal.disabled = false;

      if (window.handleScenario) {
        window.handleScenario(Number(selectIndex.textContent));
      }
    }, 3000);
  }

  // Override handleClick to NOT increment counter
  function handleClick(element) {
    const selectIndex = document.getElementById("select-index");
    if (!selectIndex) return;
    const value = element.querySelector("a").innerText;
    selectIndex.textContent = value;
    // Just call getSignal without incrementing counter here
    getSignal();
  }

  // Set event handlers
  document.getElementById("start-bot-button").onclick = startBot;
  document.getElementById("modal-verify-button").onclick = verifyModalAccount;
  document.getElementById("modal-get-id-button").onclick = openDeveloperChatForId;
  document.getElementById("unlock-bot-button").onclick = unlockBot;
  document.getElementById("activate-now-button").onclick = openDeveloperChatForActivation;
  document.getElementById("get-slots-bot-button").onclick = openDeveloperChatForSlots;

  // Enter key handlers
  document.getElementById("modal-account-id").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
      verifyModalAccount();
    }
  });

  document.getElementById("unlock-code-input").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
      unlockBot();
    }
  });

  // Clear error on input
  document.getElementById("modal-account-id").addEventListener("input", function() {
    hideModalError();
  });

  document.getElementById("unlock-code-input").addEventListener("input", function() {
    document.getElementById("unlock-error").style.display = "none";
    document.getElementById("unlock-success").style.display = "none";
  });

  // Force override getSignal when page loads
  window.addEventListener('load', function() {
    const botUnlocked = localStorage.getItem('bot_unlocked');
    const accountVerified = localStorage.getItem('account_verified');
    
    // Force attach our getSignal function
    const getSignalBtn = document.getElementById("get-signal");
    if (getSignalBtn) {
      getSignalBtn.onclick = getSignal;
      
      const currentCount = parseInt(localStorage.getItem('signal_count') || '0');
      const remaining = MAX_FREE_SIGNALS - currentCount;
      if (remaining > 0 && remaining < MAX_FREE_SIGNALS) {
        getSignalBtn.textContent = `Nh·∫≠n T√≠n Hi·ªáu (c√≤n ${remaining})`;
      } else if (remaining <= 0) {
        getSignalBtn.textContent = "ƒê√£ ƒë·∫°t gi·ªõi h·∫°n";
      }
    }
    
    // Override global functions
    window.getSignal = getSignal;
    window.handleClick = handleClick;
    
    if (botUnlocked === 'true' && accountVerified === 'true') {
      startBot();
    }
  });
</script>
</body>

</html>
